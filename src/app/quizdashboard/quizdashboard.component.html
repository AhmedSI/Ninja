<mat-horizontal-stepper linear #stepper>
  <mat-step completed="true">
    <ng-template matStepLabel>About Quiz</ng-template>
    <div class="about-quiz">
      <!-- <h5>About Quiz</h5> -->

      <form #updateQuizForm="ngForm" (ngSubmit)="updateQuiz(updateQuizForm)">
        <label for="title" style="margin-left: 45%;margin-top: 3%;"><strong>Quiz name:</strong></label>
        <input class="form-control form-control-lg quiz-name" type="text" [value]="quiz.title" name="title"
          [(ngModel)]="newQuiz.title" style="margin-top: -.5%;" required>

        <label for="name" class="mt-3 ml-5"><strong>instructions:</strong></label>
        <textarea name="name" class="form-control quiz-des col-7" rows="4" required style="resize:none"
          [value]="quiz.instructions" [(ngModel)]="newQuiz.instructions" style="margin-top:-2.5%"></textarea>

        <div class="input-group col-3 mt-5" style="margin-left: 35%;">
          <label for="time" class="mt-1 mr-1"><strong>Quiz Time :</strong></label>
          <input type="text" class="form-control" [value]="quiz.time" required name="time" [(ngModel)]="newQuiz.time">
          <div class="input-group-append">
            <span class="input-group-text">minutes</span>
          </div>
        </div>
        <button matStepperNext type="submit" class="btn btn-dark" style="margin-top: 5%;margin-left: 47%;">Next</button>
      </form>
    </div>
  </mat-step>

  <mat-step completed="true">
    <ng-template matStepLabel>Create Question</ng-template>
    <div class="quiz_description">
      <button id="add-que" type="button" class="btn btn-dark" data-toggle="modal" data-target="#myModal">
        add Question
      </button>


      <!-- question modal  -->
      <div class="modal fade" id="myModal">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <!-- Modal Header -->
            <div class="modal-header">
              <h4 class="modal-title">Add New Question</h4>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <!-- Modal body -->
            <div class="modal-body">
              <form #questionForm="ngForm" (ngSubmit)="addQuestion(questionForm)">

                <textarea name="name" class="form-control " rows="4" style="resize:none"
                  placeholder="Question body here" name="question_body" [(ngModel)]="newQuestion.question_body"
                  #question_body="ngModel"></textarea><br>
                <textarea name="name" class="form-control " rows="4" style="resize:none" placeholder="feedback here"
                  name="question_body" [(ngModel)]="newQuestion.question_reference"
                  #question_reference="ngModel"></textarea>
                <br>
                <select name="qNumber" type="text" placeholder="level" [(ngModel)]="newQuestion.question_level">
                  <option [value]="1">easy</option>
                  <option [value]="2">medium</option>
                  <option [value]="3">hard</option>
                </select>
                <br>

                <select name="qType" type="text" placeholder="question type"
                  [(ngModel)]="newQuestion.is_multiple_choice">
                  <option [value]=true>multiple choice</option>
                  <option [value]=false>one choice</option>
                </select>
                <br>

                <label for="ques-mark" class="questions-mark">Question Mark:</label>
                <div class="input-group col-3 mark-input">
                  <input id="ques-mark" type="text" class="form-control" placeholder="Mark" name="question_mark"
                    [(ngModel)]="newQuestion.question_mark" #question_mark="ngModel">
                  <div class="input-group-append">
                    <span class="input-group-text">marks</span>
                  </div>
                </div>
                <br>
                <br>

                <div class="modal-footer">
                  <button type="button" class="btn btn-danger" data-dismiss="modal"  #closeBtn1>Close</button>
                  <input type="submit" value="Add" class="btn btn-dark">
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>

      <!-- edit question modal -->
      <div class="modal fade" id="myModal3">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <!-- Modal Header -->
            <div class="modal-header">
              <h4 class="modal-title">Edit Question</h4>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <!-- Modal body -->
            <div class="modal-body">
              <form #updateQuestionForm="ngForm" (ngSubmit)="updateQuestion(updateQuestionForm)">
                <p>Q1)</p>
                <textarea name="name" class="form-control " rows="4" style="resize:none" placeholder="Question here"
                  name="question_body" [(ngModel)]="newQuestion.question_body" #question_body="ngModel"></textarea>
                <br>
                <label for="ques-mark" class="questions-mark">Question Mark:</label>
                <div class="input-group col-3 mark-input">
                  <input id="ques-mark" type="text" class="form-control" placeholder="Mark" name="question_mark"
                    [(ngModel)]="newQuestion.question_mark" #question_mark="ngModel">
                  <div class="input-group-append">
                    <span class="input-group-text">marks</span>
                  </div>
                </div>
                <br>
                <br>

                <div class="modal-footer">
                  <button type="button" class="btn btn-danger" data-dismiss="modal" #closeBtn2>Close</button>
                  <input type="submit" value="edit" class="btn btn-dark">
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>


      <!-- solution modal  -->
      <div class="modal fade" id="myModal2">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <!-- Modal Header -->
            <div class="modal-header">
              <h4 class="modal-title">Add new Choice</h4>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <!-- Modal body -->
            <div class="modal-body">
              <form #choiceForm="ngForm" (ngSubmit)="addAnswer(choiceForm)">


                <textarea name="answer_body" class="form-control " rows="1" style="resize:none" placeholder="Sol"
                  [(ngModel)]="newAnswer.answer_body" #answer_body="ngModel"></textarea>
                <br>
                <fieldset class="form-group">
                  <div class="row">
                    <legend class="col-form-label col-sm-2 pt-0">Answer Is:</legend>
                    <div class="col-sm-10">
                      <div class="form-check">
                        <input class="form-check-input" type="radio" name="is_correct" id="gridRadios1" value="true"
                          checked [(ngModel)]="newAnswer.is_correct" #is_correct="ngModel">
                        <label class="form-check-label" for="gridRadios1">
                          Correct
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="radio" name="is_correct" id="gridRadios2" value="false"
                          [(ngModel)]="newAnswer.is_correct" #is_correct="ngModel">
                        <label class="form-check-label" for="gridRadios2">
                          False
                        </label>
                      </div>
                    </div>
                  </div>
                </fieldset>
                <br>
                <br>

                <div class="modal-footer">
                  <button type="button" class="btn btn-danger" data-dismiss="modal" #closeBtn3>Close</button>
                  <input type="submit" value="Add" class="btn btn-dark">
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>


      <!-- edit sol modal -->
      <div class="modal fade" id="myModal4">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <!-- Modal Header -->
            <div class="modal-header">
              <h4 class="modal-title">edit Choice</h4>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <!-- Modal body -->
            <div class="modal-body">
              <form #updateChoiceForm="ngForm" (ngSubmit)="updateAnswer(updateChoiceForm)">


                <textarea name="body" class="form-control " rows="1" style="resize:none" placeholder="Sol" [(ngModel)]="newAnswer.answer_body" #answer_body="ngModel"></textarea>
                <br>
                <fieldset class="form-group">
                  <div class="row">
                    <legend class="col-form-label col-sm-2 pt-0">Answer Is:</legend>
                    <div class="col-sm-10">
                      <div class="form-check">
                        <input class="form-check-input" type="radio" name="gridRadios" id="gridRadios1" value="true"
                          checked [(ngModel)]="newAnswer.is_correct" #is_correct="ngModel">
                        <label class="form-check-label" for="gridRadios1">
                          Correct
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="radio" name="gridRadios" id="gridRadios2" value="false" [(ngModel)]="newAnswer.is_correct" #is_correct="ngModel">
                        <label class="form-check-label" for="gridRadios2">
                          False
                        </label>
                      </div>
                    </div>
                  </div>
                </fieldset>
                <br>
                <br>

                <div class="modal-footer">
                  <button type="button" class="btn btn-danger" data-dismiss="modal" #closeBtn4>Close</button>
                  <input type="submit" value="edit" class="btn btn-dark">
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>


      <section style="border: 1px solid black;padding: 1%;" *ngFor="let question of quiz.questions; index as i;">

        <button style="float: right;margin-top: -.5%;font-size: 200%;" mat-icon-button [matMenuTriggerFor]="menu">
          <mat-icon class="white-icon" [inline]="true">more_vert</mat-icon>
        </button>
        <mat-menu #menu="matMenu">
          <button mat-menu-item (click)="setSelectedquestion(question.questionId)" data-toggle="modal"
            data-target="#myModal3">
            <mat-icon>edit</mat-icon>
            <span>Edit question</span>
          </button>
          <button mat-menu-item (click)="deleteQuestion(question.questionId)">
            <mat-icon>delete_forever</mat-icon>
            <span>Remove question</span>
          </button>
          <button mat-menu-item (click)="setSelectedquestion(question.questionId)" data-toggle="modal"
            data-target="#myModal2">
            <mat-icon>add</mat-icon>
            <span>Add solution</span>
          </button>
        </mat-menu>

        <div> <strong style="size: 110%;">Q{{i+1}})</strong>
          <p style="margin-left:3%;margin-top: -2%;">{{question.body}}</p>
        </div>


        <div class="ques-c col-11" *ngFor="let answer of question.answers;let ii = index">
          <button style="float: left;margin-top: -1%;font-size: 150%;" mat-icon-button [matMenuTriggerFor]="menu1">
            <mat-icon class="white-icon" [inline]="true">edit</mat-icon>
          </button>
          <mat-menu #menu1="matMenu">
            <button mat-menu-item (click)="setSelectedSolution(answer.answerId)" data-toggle="modal"
              data-target="#myModal4">
              <mat-icon>edit</mat-icon>
              <span>Edit sol</span>
            </button>
            <button mat-menu-item (click)="deleteAnswer(answer.answerId)">
              <mat-icon>delete_forever</mat-icon>
              <span>Remove sol</span>
            </button>
          </mat-menu>
          <span style="color: green;float: right;" *ngIf="answer.correct">Correct</span>
          <div class="form-check col-9 ml-5">
            <input id="id{{ii}}" type="radio" class="form-check-input" disabled [checked]="answer.correct"
              *ngIf="!question.multipleChoice">
            <input id="id{{ii}}" type="checkbox" class="form-check-input" disabled [checked]="answer.correct"
              *ngIf="question.multipleChoice">
            <label class="form-check-label" for="id{{ii}}">{{answer.body}} </label>
          </div>


        </div>
      </section>
    </div>
    <button matStepperNext type="button" class="btn btn-dark" style="margin-top: 5%;margin-left: 47%;">Next</button>
  </mat-step>

  <mat-step>
    <ng-template matStepLabel>Finishing</ng-template>
    <form #questionNoForm="ngForm" (ngSubmit)="setNumber(questionNoForm)">
      <div class="input-group mark-input">
        Currently quiz Question Numbers :
        <strong class="ml-2"> {{quiz.no_of_questions}} </strong>


      </div>

      <div style="margin-left: 37%;">
        <label class="questions-mark">Select Question number for this quiz : </label>
        <select name="qNumber" type="text" placeholder="Category" [(ngModel)]="qNumber">
          <option *ngFor="let question of quiz.questions; index as i;" [value]="i+1">{{i+1}}</option>
        </select>
      </div>
      <br>
      <div style="margin-left: 45%;margin-top: 4%;">
        <button matStepperPrevious class="btn btn-dark mr-4">Back</button>
        <button type="submit" class="btn btn-dark">finish</button>
      </div>
    </form>
  </mat-step>
</mat-horizontal-stepper>